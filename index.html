<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>æ¯æ—¥äº”è¡Œç”Ÿè‚–ç©¿è¡£æŒ‡å—</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@1.6.12/lunar.js"></script>
  
  <style>
    /* CSS æ ·å¼éƒ¨åˆ† (å¯¹åº”ä½ çš„ wxss) */
    body { margin: 0; padding: 0; background-color: #f8f9fc; font-family: -apple-system, sans-serif; -webkit-tap-highlight-color: transparent; }
    .container { padding: 12px; min-height: 100vh; box-sizing: border-box; max-width: 600px; margin: 0 auto; }
    
    .dashboard-header { text-align: center; margin-bottom: 15px; }
    .date-chip { display: inline-block; font-size: 13px; color: #666; background: #fff; padding: 4px 10px; border-radius: 15px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); margin-bottom: 6px; }
    .energy-chip { font-size: 16px; font-weight: bold; color: #333; }

    /* ç½‘æ ¼ç³»ç»Ÿ */
    .zodiac-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; width: 100%; }

    /* å¡ç‰‡æ ·å¼ */
    .grid-item {
      background: #fff; border-radius: 8px; height: 100px; padding: 8px 0;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.03); overflow: hidden;
    }

    .item-head { display: flex; align-items: center; gap: 2px; margin-bottom: 8px; }
    .icon { font-size: 16px; }
    .name { font-size: 13px; color: #555; font-weight: bold; }

    .item-body { display: flex; align-items: center; gap: 3px; margin-bottom: 8px; }
    .yi-char { font-size: 11px; padding: 1px 3px; border: 1px solid; border-radius: 3px; font-weight: bold; }
    .color-font { font-size: 16px; font-weight: 800; white-space: nowrap; }

    .item-foot { width: 100%; text-align: center; }
    .reason-text { font-size: 11px; color: #333; background: rgba(255,255,255,0.6); padding: 2px 6px; border-radius: 5px; font-weight: 500; }

    .footer-tips { text-align: center; margin-top: 25px; font-size: 11px; color: #ccc; padding-bottom: 20px;}
  </style>
</head>
<body>

  <div id="app" class="container">
    <div class="dashboard-header">
      <div class="date-chip">{{currentDate}} {{lunarInfo}}</div>
      <div class="energy-chip">ä»Šæ—¥èƒ½é‡ï¼š{{nayin}}</div>
    </div>

    <div class="zodiac-grid">
      <div v-for="(item, index) in zodiacGrid" :key="index" class="grid-item" 
           :style="{ background: item.bgColor, borderBottom: '3px solid ' + item.themeColor }">
        
        <div class="item-head">
          <span class="icon">{{item.icon}}</span>
          <span class="name">{{item.name}}</span>
        </div>

        <div class="item-body">
          <span class="yi-char" :style="{ borderColor: item.themeColor, color: item.themeColor }">å®œ</span>
          <span class="color-font" :style="{ color: item.themeColor }">{{item.mainColor}}</span>
        </div>

        <div class="item-foot">
          <span class="reason-text">ğŸ’¡{{item.reason}}</span>
        </div>
      </div>
    </div>

    <div class="footer-tips">æ¯æ—¥æ ¹æ®å¹²æ”¯äº”è¡Œç²¾å‡†å®šåˆ¶</div>
  </div>

  <script>
    // é€»è¾‘éƒ¨åˆ† (å¯¹åº”ä½ çš„ JS)
    new Vue({
      el: '#app',
      data: {
        currentDate: '',
        lunarInfo: '',
        nayin: '',
        zodiacGrid: []
      },
      mounted() {
        this.initData();
      },
      methods: {
        initData() {
          try {
            // è¿™é‡Œç›´æ¥ä½¿ç”¨å…¨å±€çš„ Lunar ç±»
            const date = new Date();
            const solar = Solar.fromDate(date);
            const lunar = solar.getLunar();
            const eightChar = lunar.getEightChar();

            let dayWuXing = 'åœŸ';
            const naYinStr = eightChar.getDayNaYin();
            if (naYinStr) dayWuXing = naYinStr.charAt(naYinStr.length - 1);

            const list = this.generatePrecisionAdvice(dayWuXing);

            // æ›´æ–°æ•°æ®
            const weeks = ['æ—¥','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­'];
            this.currentDate = `${solar.getMonth()}æœˆ${solar.getDay()}æ—¥ æ˜ŸæœŸ${weeks[date.getDay()]}`;
            this.lunarInfo = `å†œå†${lunar.getMonthInChinese()}æœˆ${lunar.getDayInChinese()}`;
            this.nayin = `${naYinStr}æ—¥ (äº”è¡Œå±${dayWuXing})`;
            this.zodiacGrid = list;

          } catch (e) {
            console.error(e);
          }
        },
        generatePrecisionAdvice(dayEle) {
          // æ•°æ®å¸¸é‡
          const VARIATION_DB = {
            'æœ¨': ['æ£®æ—ç»¿', 'è–„è·ç»¿', 'é’ç¢§è‰²', 'å¢¨ç»¿è‰²', 'ç¿¡ç¿ è‰²', 'æ©„æ¦„ç»¿'],
            'ç«': ['ä¸­å›½çº¢', 'ç´«ç½—å…°', 'çŠç‘šæ©™', 'é…’çº¢è‰²', 'æ¨±èŠ±ç²‰', 'æœ±ç ‚çº¢'],
            'åœŸ': ['å¤§åœ°é»„', 'å¡å…¶è‰²', 'æ·±æ£•è‰²', 'ç±³æè‰²', 'ç„¦ç³–è‰²', 'é©¼è‰²'],
            'é‡‘': ['çç ç™½', 'æµå…‰é“¶', 'é¦™æ§Ÿé‡‘', 'æµ…ç°è‰²', 'ç±³ç™½è‰²', 'é’›é‡‘è‰²'],
            'æ°´': ['æ·±é‚ƒé»‘', 'è—é’è‰²', 'å®è“è‰²', 'çƒŸç°è‰²', 'å¢¨è“è‰²', 'é»›è“è‰²']
          };
          const STYLE_MAP = {
            'æœ¨': { hex: '#67c23a', bg: '#f0f9eb' },
            'ç«': { hex: '#f56c6c', bg: '#fef0f0' },
            'åœŸ': { hex: '#e6a23c', bg: '#fdf6ec' },
            'é‡‘': { hex: '#909399', bg: '#f4f4f5' },
            'æ°´': { hex: '#409eff', bg: '#ecf5ff' }
          };
          const ZODIAC_DATA = [
            { name: 'é¼ ', ele: 'æ°´', icon: 'ğŸ­' }, { name: 'ç‰›', ele: 'åœŸ', icon: 'ğŸ®' },
            { name: 'è™', ele: 'æœ¨', icon: 'ğŸ¯' }, { name: 'å…”', ele: 'æœ¨', icon: 'ğŸ°' },
            { name: 'é¾™', ele: 'åœŸ', icon: 'ğŸ²' }, { name: 'è›‡', ele: 'ç«', icon: 'ğŸ' },
            { name: 'é©¬', ele: 'ç«', icon: 'ğŸ´' }, { name: 'ç¾Š', ele: 'åœŸ', icon: 'ğŸ' },
            { name: 'çŒ´', ele: 'é‡‘', icon: 'ğŸµ' }, { name: 'é¸¡', ele: 'é‡‘', icon: 'ğŸ”' },
            { name: 'ç‹—', ele: 'åœŸ', icon: 'ğŸ¶' }, { name: 'çŒª', ele: 'æ°´', icon: 'ğŸ·' }
          ];

          const sheng = { 'æœ¨': 'ç«', 'ç«': 'åœŸ', 'åœŸ': 'é‡‘', 'é‡‘': 'æ°´', 'æ°´': 'æœ¨' };
          const ke    = { 'æœ¨': 'åœŸ', 'åœŸ': 'æ°´', 'æ°´': 'ç«', 'ç«': 'é‡‘', 'é‡‘': 'æœ¨' };
          const getMother = (c) => Object.keys(sheng).find(k => sheng[k] === c) || 'åœŸ';

          return ZODIAC_DATA.map((item, index) => {
            const zEle = item.ele;
            let luckyEle = 'åœŸ';
            let reason = 'å‰æ˜Ÿé«˜ç…§';

            if (sheng[dayEle] === zEle) { luckyEle = dayEle; reason = "å¾—å¤©æ—¶ç›¸åŠ©"; }
            else if (dayEle === zEle) { luckyEle = zEle; reason = "äº”è¡ŒåŒæ°”æ—º"; }
            else if (ke[dayEle] === zEle) { luckyEle = sheng[dayEle]; reason = "é€šå…³è§£å‹åŠ›"; }
            else { luckyEle = getMother(zEle); reason = "ç”Ÿèº«è¡¥å…ƒæ°”"; }

            const variations = VARIATION_DB[luckyEle] || VARIATION_DB['åœŸ'];
            const variationIndex = (index + new Date().getDate()) % variations.length;
            const detailColor = variations[variationIndex];
            const style = STYLE_MAP[luckyEle] || STYLE_MAP['åœŸ'];

            return {
              name: item.name, icon: item.icon,
              mainColor: detailColor, reason: reason,
              themeColor: style.hex, bgColor: style.bg
            };
          });
        }
      }
    })
  </script>
</body>
</html>